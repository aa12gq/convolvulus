/*! 
 Build based on gin-vue-admin 
 Time : 1705391497000 */
import{g as e,f as a,d as t,a as r}from"./sieve-005228f9.js";import{W as o}from"./warningBar-4e9b9d77.js";import{f as l}from"./date-8358c12f.js";import{c as d}from"./.pnpm-8206d43d.js";import"./index-e8818864.js";import"vue";const n={class:"authority"},u={class:"gva-table-box"},s=Vue.createElementVNode("div",{class:"gva-btn-list"},null,-1),i={class:"gva-btn-list"},c={class:"flex space-x-4"},p={class:"flex items-center px-2 border-t border-b py-2 border-slate-200/60 dark:border-darkmode-400"},V=Vue.createElementVNode("div",{class:"font-medium mr-2"},"当前任务:",-1),m={class:"bg-slate-400 rounded text-slate-100 px-2 text-sm"},v=Object.assign({name:"Staff"},{__name:"sieve_number",setup(v){const h=Vue.ref(1),b=Vue.ref(0),y=Vue.ref(10),f=Vue.ref(null),w=VueRouter.useRoute(),N=Vue.ref(""),g=Vue.ref(""),x=Vue.ref(""),C=e=>{h.value=e,j()},k=e=>{y.value=e,j()},_=async()=>{x.value=g.value,await j()},E=()=>{g.value="",x.value="",j()},j=async()=>{const a=await e(h.value,y.value,w.params.id,x.value);0===a.code&&(a.data.list.forEach((e=>{e.createdAt=e.createdAt?l(e.createdAt,"yyyy-MM-dd hh:mm:ss"):"",e.updatedAt=e.updatedAt?l(e.updatedAt,"yyyy-MM-dd hh:mm:ss"):""})),f.value=[],setTimeout((()=>{f.value=a.data.list}),100),b.value=a.data.total,h.value=a.data.page,y.value=a.data.pageSize)},A=async e=>{try{const e=await t(String(w.params.id));if(e&&e.data){const a=new Blob([e.data],{type:"text/plain"}),t=window.URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.setAttribute("download","disable_accounts.txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}else d.error("下载禁用账号失败：没有数据返回")}catch(a){console.error("下载出错",a)}},D=async()=>{try{const e=await r(String(w.params.id));if(e&&e.data){const a=new Blob([e.data],{type:"text/plain"}),t=window.URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.setAttribute("download","normal_accounts.txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}else console.error("下载存活账号失败：没有数据返回")}catch(e){d.error(e||"下载出错"),console.error("下载出错",e)}};Vue.onMounted((async()=>{await(async()=>{const e=w.params.id,t=await a(e);t&&t.data&&t.data.resieveTask.taskName&&(N.value=t.data.resieveTask.taskName)})(),j()}));const R=e=>{switch(e){case"Normal":return"存活";case"Disable":return"禁用";case"Permanent":return"永久";default:return""}},S=e=>{switch(e){case"Disable":case"Permanent":return"danger";case"Normal":return"success";default:return""}};return(e,a)=>{const t=Vue.resolveComponent("el-input"),r=Vue.resolveComponent("el-button"),l=Vue.resolveComponent("el-table-column"),d=Vue.resolveComponent("el-table"),v=Vue.resolveComponent("el-pagination");return Vue.openBlock(),Vue.createElementBlock("div",n,[Vue.createVNode(o,{title:"任务筛号列表"}),Vue.createElementVNode("div",u,[s,Vue.createElementVNode("div",i,[Vue.createElementVNode("div",c,[Vue.createVNode(t,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),placeholder:"请输入手机号码",clearable:"",style:{width:"200px"},onClear:E,onKeyup:Vue.withKeys(e.searchTask,["enter","native"])},null,8,["modelValue","onKeyup"]),Vue.createVNode(r,{type:"primary",icon:"Search",onClick:_},{default:Vue.withCtx((()=>[Vue.createTextVNode("搜索")])),_:1}),Vue.createVNode(r,{type:"primary",icon:"Download",disabled:!e.$route.params.id||0===e.$route.params.id,onClick:D},{default:Vue.withCtx((()=>[Vue.createTextVNode("导出存活账号")])),_:1},8,["disabled"]),Vue.createVNode(r,{type:"primary",icon:"Download",disabled:!e.$route.params.id||0===e.$route.params.id,onClick:A},{default:Vue.withCtx((()=>[Vue.createTextVNode("导出禁用账号")])),_:1},8,["disabled"]),Vue.createVNode(r,{color:"#626aef",icon:"refresh",dark:e.isDark,plain:"",onClick:j},{default:Vue.withCtx((()=>[Vue.createTextVNode("刷新")])),_:1},8,["dark"])])]),Vue.createElementVNode("div",p,[V,Vue.createElementVNode("span",m,Vue.toDisplayString(N.value),1)]),Vue.createVNode(d,{data:f.value,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"authorityId",style:{width:"100%"}},{default:Vue.withCtx((()=>[Vue.createVNode(l,{label:"ID","min-width":"180",prop:"ID"}),Vue.createVNode(l,{label:"任务ID","min-width":"180",prop:"task_id"}),Vue.createVNode(l,{align:"left",label:"手机号码","min-width":"180",prop:"phoneNumber"}),Vue.createVNode(l,{align:"left",label:"状态","min-width":"180",prop:"Status"},{default:Vue.withCtx((({row:a})=>[Vue.createVNode(r,{type:S(a.status),size:"small","loading-icon":e.Eleme,plain:""},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(R(a.status)),1)])),_:2},1032,["type","loading-icon"])])),_:1}),Vue.createVNode(l,{align:"left",label:"创建时间","min-width":"180",prop:"createdAt"}),Vue.createVNode(l,{align:"left",label:"更新时间","min-width":"180",prop:"updatedAt"})])),_:1},8,["data"]),Vue.createVNode(v,{"current-page":e.page,"page-size":y.value,"page-sizes":[10,30,50,100],total:b.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:C,onSizeChange:k},null,8,["current-page","page-size","total"])])])}}});export{v as default};
