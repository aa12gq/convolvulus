/*! 
 Build based on gin-vue-admin 
 Time : 1705391497000 */
import{s as e}from"./index-e8818864.js";import{f as t}from"./format-7fc9107b.js";import"./.pnpm-8206d43d.js";import"vue";import"./date-8358c12f.js";import"./dictionary-b8ecc85f.js";import"./sysDictionary-30d98c9c.js";const a={class:"gva-search-box"},l={class:"gva-table-box"},u={class:"gva-btn-list"},o=Vue.createElementVNode("p",null,"确定要删除吗？",-1),r={style:{"text-align":"right","margin-top":"8px"}},V={class:"popover-box"},d={key:1},n={class:"popover-box"},i={key:1},c=Vue.createElementVNode("p",null,"确定要删除吗？",-1),s={style:{"text-align":"right","margin-top":"8px"}},p={class:"gva-pagination"},m=Object.assign({name:"SysOperationRecord"},{__name:"sysOperationRecord",setup(m){const v=Vue.ref(1),h=Vue.ref(0),f=Vue.ref(10),N=Vue.ref([]),w=Vue.ref({}),g=()=>{w.value={}},C=()=>{v.value=1,f.value=10,""===w.value.status&&(w.value.status=null),b()},x=e=>{f.value=e,b()},y=e=>{v.value=e,b()},b=async()=>{const t=await(a={page:v.value,pageSize:f.value,...w.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:a}));var a;0===t.code&&(N.value=t.data.list,h.value=t.data.total,v.value=t.data.page,f.value=t.data.pageSize)};b();const k=Vue.ref(!1),_=Vue.ref([]),E=e=>{_.value=e},S=async()=>{const t=[];_.value&&_.value.forEach((e=>{t.push(e.ID)}));var a;0===(await(a={ids:t},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:a}))).code&&(ElementPlus.ElMessage({type:"success",message:"删除成功"}),N.value.length===t.length&&v.value>1&&v.value--,k.value=!1,b())},B=async t=>{t.visible=!1;var a;0===(await(a={ID:t.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:a}))).code&&(ElementPlus.ElMessage({type:"success",message:"删除成功"}),1===N.value.length&&v.value>1&&v.value--,b())},D=e=>{try{return JSON.parse(e)}catch(t){return e}};return(e,m)=>{const b=Vue.resolveComponent("el-input"),T=Vue.resolveComponent("el-form-item"),O=Vue.resolveComponent("el-button"),j=Vue.resolveComponent("el-form"),R=Vue.resolveComponent("el-popover"),z=Vue.resolveComponent("el-table-column"),I=Vue.resolveComponent("el-tag"),U=Vue.resolveComponent("warning"),P=Vue.resolveComponent("el-icon"),M=Vue.resolveComponent("el-table"),A=Vue.resolveComponent("el-pagination");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",a,[Vue.createVNode(j,{inline:!0,model:w.value},{default:Vue.withCtx((()=>[Vue.createVNode(T,{label:"请求方法"},{default:Vue.withCtx((()=>[Vue.createVNode(b,{modelValue:w.value.method,"onUpdate:modelValue":m[0]||(m[0]=e=>w.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),Vue.createVNode(T,{label:"请求路径"},{default:Vue.withCtx((()=>[Vue.createVNode(b,{modelValue:w.value.path,"onUpdate:modelValue":m[1]||(m[1]=e=>w.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),Vue.createVNode(T,{label:"结果状态码"},{default:Vue.withCtx((()=>[Vue.createVNode(b,{modelValue:w.value.status,"onUpdate:modelValue":m[2]||(m[2]=e=>w.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),Vue.createVNode(T,null,{default:Vue.withCtx((()=>[Vue.createVNode(O,{type:"primary",icon:"search",onClick:C},{default:Vue.withCtx((()=>[Vue.createTextVNode("查询")])),_:1}),Vue.createVNode(O,{icon:"refresh",onClick:g},{default:Vue.withCtx((()=>[Vue.createTextVNode("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),Vue.createElementVNode("div",l,[Vue.createElementVNode("div",u,[Vue.createVNode(R,{modelValue:k.value,"onUpdate:modelValue":m[5]||(m[5]=e=>k.value=e),placement:"top",width:"160"},{reference:Vue.withCtx((()=>[Vue.createVNode(O,{icon:"delete",style:{"margin-left":"10px"},disabled:!_.value.length,onClick:m[4]||(m[4]=e=>k.value=!0)},{default:Vue.withCtx((()=>[Vue.createTextVNode("删除")])),_:1},8,["disabled"])])),default:Vue.withCtx((()=>[o,Vue.createElementVNode("div",r,[Vue.createVNode(O,{type:"primary",link:"",onClick:m[3]||(m[3]=e=>k.value=!1)},{default:Vue.withCtx((()=>[Vue.createTextVNode("取消")])),_:1}),Vue.createVNode(O,{type:"primary",onClick:S},{default:Vue.withCtx((()=>[Vue.createTextVNode("确定")])),_:1})])])),_:1},8,["modelValue"])]),Vue.createVNode(M,{ref:"multipleTable",data:N.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:E},{default:Vue.withCtx((()=>[Vue.createVNode(z,{align:"left",type:"selection",width:"55"}),Vue.createVNode(z,{align:"left",label:"操作人",width:"140"},{default:Vue.withCtx((e=>[Vue.createElementVNode("div",null,Vue.toDisplayString(e.row.user.userName)+"("+Vue.toDisplayString(e.row.user.nickName)+")",1)])),_:1}),Vue.createVNode(z,{align:"left",label:"日期",width:"180"},{default:Vue.withCtx((e=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(t)(e.row.CreatedAt)),1)])),_:1}),Vue.createVNode(z,{align:"left",label:"状态码",prop:"status",width:"120"},{default:Vue.withCtx((e=>[Vue.createElementVNode("div",null,[Vue.createVNode(I,{type:"success"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.row.status),1)])),_:2},1024)])])),_:1}),Vue.createVNode(z,{align:"left",label:"请求IP",prop:"ip",width:"120"}),Vue.createVNode(z,{align:"left",label:"请求方法",prop:"method",width:"120"}),Vue.createVNode(z,{align:"left",label:"请求路径",prop:"path",width:"240"}),Vue.createVNode(z,{align:"left",label:"请求",prop:"path",width:"80"},{default:Vue.withCtx((e=>[Vue.createElementVNode("div",null,[e.row.body?(Vue.openBlock(),Vue.createBlock(R,{key:0,placement:"left-start",trigger:"click"},{reference:Vue.withCtx((()=>[Vue.createVNode(P,{style:{cursor:"pointer"}},{default:Vue.withCtx((()=>[Vue.createVNode(U)])),_:1})])),default:Vue.withCtx((()=>[Vue.createElementVNode("div",V,[Vue.createElementVNode("pre",null,Vue.toDisplayString(D(e.row.body)),1)])])),_:2},1024)):(Vue.openBlock(),Vue.createElementBlock("span",d,"无"))])])),_:1}),Vue.createVNode(z,{align:"left",label:"响应",prop:"path",width:"80"},{default:Vue.withCtx((e=>[Vue.createElementVNode("div",null,[e.row.resp?(Vue.openBlock(),Vue.createBlock(R,{key:0,placement:"left-start",trigger:"click"},{reference:Vue.withCtx((()=>[Vue.createVNode(P,{style:{cursor:"pointer"}},{default:Vue.withCtx((()=>[Vue.createVNode(U)])),_:1})])),default:Vue.withCtx((()=>[Vue.createElementVNode("div",n,[Vue.createElementVNode("pre",null,Vue.toDisplayString(D(e.row.resp)),1)])])),_:2},1024)):(Vue.openBlock(),Vue.createElementBlock("span",i,"无"))])])),_:1}),Vue.createVNode(z,{align:"left",label:"操作"},{default:Vue.withCtx((e=>[Vue.createVNode(R,{modelValue:e.row.visible,"onUpdate:modelValue":t=>e.row.visible=t,placement:"top",width:"160"},{reference:Vue.withCtx((()=>[Vue.createVNode(O,{icon:"delete",type:"primary",link:"",onClick:t=>e.row.visible=!0},{default:Vue.withCtx((()=>[Vue.createTextVNode("删除")])),_:2},1032,["onClick"])])),default:Vue.withCtx((()=>[c,Vue.createElementVNode("div",s,[Vue.createVNode(O,{type:"primary",link:"",onClick:t=>e.row.visible=!1},{default:Vue.withCtx((()=>[Vue.createTextVNode("取消")])),_:2},1032,["onClick"]),Vue.createVNode(O,{type:"primary",onClick:t=>B(e.row)},{default:Vue.withCtx((()=>[Vue.createTextVNode("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),Vue.createElementVNode("div",p,[Vue.createVNode(A,{"current-page":v.value,"page-size":f.value,"page-sizes":[10,30,50,100],total:h.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:y,onSizeChange:x},null,8,["current-page","page-size","total"])])])])}}});export{m as default};
