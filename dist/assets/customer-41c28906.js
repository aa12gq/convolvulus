/*! 
 Build based on gin-vue-admin 
 Time : 1705391497000 */
import{s as e}from"./index-e8818864.js";import{W as t}from"./warningBar-4e9b9d77.js";import{f as a}from"./format-7fc9107b.js";import"./.pnpm-8206d43d.js";import"vue";import"./date-8358c12f.js";import"./dictionary-b8ecc85f.js";import"./sysDictionary-30d98c9c.js";const l=t=>e({url:"/customer/customer",method:"post",data:t}),o={class:"gva-table-box"},u={class:"gva-btn-list"},r=Vue.createElementVNode("p",null,"确定要删除吗？",-1),V={style:{"text-align":"right","margin-top":"8px"}},i={class:"gva-pagination"},d={class:"dialog-footer"},c=Object.assign({name:"Customer"},{__name:"customer",setup(c){const n=Vue.ref({customerName:"",customerPhoneData:""}),s=Vue.ref(1),m=Vue.ref(0),p=Vue.ref(10),v=Vue.ref([]),f=e=>{p.value=e,N()},C=e=>{s.value=e,N()},N=async()=>{const t=await(a={page:s.value,pageSize:p.value},e({url:"/customer/customerList",method:"get",params:a}));var a;0===t.code&&(v.value=t.data.list,m.value=t.data.total,s.value=t.data.page,p.value=t.data.pageSize)};N();const h=Vue.ref(!1),w=Vue.ref(""),g=async t=>{const a=await(l={ID:t.ID},e({url:"/customer/customer",method:"get",params:l}));var l;w.value="update",0===a.code&&(n.value=a.data.customer,h.value=!0)},x=()=>{h.value=!1,n.value={customerName:"",customerPhoneData:""}},y=async t=>{t.visible=!1;var a;0===(await(a={ID:t.ID},e({url:"/customer/customer",method:"delete",data:a}))).code&&(ElementPlus.ElMessage({type:"success",message:"删除成功"}),1===v.value.length&&s.value>1&&s.value--,N())},b=async()=>{let t;switch(w.value){case"create":default:t=await l(n.value);break;case"update":t=await(a=n.value,e({url:"/customer/customer",method:"put",data:a}))}var a;0===t.code&&(x(),N())},k=()=>{w.value="create",h.value=!0};return(e,l)=>{const c=Vue.resolveComponent("el-button"),N=Vue.resolveComponent("el-table-column"),w=Vue.resolveComponent("el-popover"),_=Vue.resolveComponent("el-table"),D=Vue.resolveComponent("el-pagination"),E=Vue.resolveComponent("el-input"),j=Vue.resolveComponent("el-form-item"),T=Vue.resolveComponent("el-form"),z=Vue.resolveComponent("el-dialog");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(t,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),Vue.createElementVNode("div",o,[Vue.createElementVNode("div",u,[Vue.createVNode(c,{type:"primary",icon:"plus",onClick:k},{default:Vue.withCtx((()=>[Vue.createTextVNode("新增")])),_:1})]),Vue.createVNode(_,{ref:"multipleTable",data:v.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:Vue.withCtx((()=>[Vue.createVNode(N,{type:"selection",width:"55"}),Vue.createVNode(N,{align:"left",label:"接入日期",width:"180"},{default:Vue.withCtx((e=>[Vue.createElementVNode("span",null,Vue.toDisplayString(Vue.unref(a)(e.row.CreatedAt)),1)])),_:1}),Vue.createVNode(N,{align:"left",label:"姓名",prop:"customerName",width:"120"}),Vue.createVNode(N,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),Vue.createVNode(N,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),Vue.createVNode(N,{align:"left",label:"操作","min-width":"160"},{default:Vue.withCtx((e=>[Vue.createVNode(c,{type:"primary",link:"",icon:"edit",onClick:t=>g(e.row)},{default:Vue.withCtx((()=>[Vue.createTextVNode("变更")])),_:2},1032,["onClick"]),Vue.createVNode(w,{modelValue:e.row.visible,"onUpdate:modelValue":t=>e.row.visible=t,placement:"top",width:"160"},{reference:Vue.withCtx((()=>[Vue.createVNode(c,{type:"primary",link:"",icon:"delete",onClick:t=>e.row.visible=!0},{default:Vue.withCtx((()=>[Vue.createTextVNode("删除")])),_:2},1032,["onClick"])])),default:Vue.withCtx((()=>[r,Vue.createElementVNode("div",V,[Vue.createVNode(c,{type:"primary",link:"",onClick:t=>e.row.visible=!1},{default:Vue.withCtx((()=>[Vue.createTextVNode("取消")])),_:2},1032,["onClick"]),Vue.createVNode(c,{type:"primary",onClick:t=>y(e.row)},{default:Vue.withCtx((()=>[Vue.createTextVNode("确定")])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),Vue.createElementVNode("div",i,[Vue.createVNode(D,{"current-page":s.value,"page-size":p.value,"page-sizes":[10,30,50,100],total:m.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:C,onSizeChange:f},null,8,["current-page","page-size","total"])])]),Vue.createVNode(z,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value=e),"before-close":x,title:"客户"},{footer:Vue.withCtx((()=>[Vue.createElementVNode("div",d,[Vue.createVNode(c,{onClick:x},{default:Vue.withCtx((()=>[Vue.createTextVNode("取 消")])),_:1}),Vue.createVNode(c,{type:"primary",onClick:b},{default:Vue.withCtx((()=>[Vue.createTextVNode("确 定")])),_:1})])])),default:Vue.withCtx((()=>[Vue.createVNode(T,{inline:!0,model:n.value,"label-width":"80px"},{default:Vue.withCtx((()=>[Vue.createVNode(j,{label:"客户名"},{default:Vue.withCtx((()=>[Vue.createVNode(E,{modelValue:n.value.customerName,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),Vue.createVNode(j,{label:"客户电话"},{default:Vue.withCtx((()=>[Vue.createVNode(E,{modelValue:n.value.customerPhoneData,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{c as default};
