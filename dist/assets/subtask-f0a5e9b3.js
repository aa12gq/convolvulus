/*! 
 Build based on gin-vue-admin 
 Time : 1705391497000 */
import{k as e}from"./registerTask-73d20a44.js";import{W as t}from"./warningBar-4e9b9d77.js";import{f as a}from"./date-8358c12f.js";import"./index-e8818864.js";import"./.pnpm-8206d43d.js";import"vue";const l={class:"authority"},r={class:"gva-table-box"},u=Vue.createElementVNode("div",{class:"gva-btn-list"},null,-1),n={class:"gva-btn-list"},s={class:"flex space-x-4"},i={class:"flex items-center px-2 border-t border-b py-2 border-slate-200/60 dark:border-darkmode-400"},d=Vue.createElementVNode("div",{class:"font-medium mr-2"},"当前任务:",-1),o={class:"bg-slate-400 rounded text-slate-100 px-2 text-sm"},c=Object.assign({name:"Staff"},{__name:"subtask",setup(c){const V=Vue.ref(1),p=Vue.ref(0),m=Vue.ref(10),h=Vue.ref(null),v=VueRouter.useRoute(),g=Vue.ref(""),f=Vue.ref(""),y=Vue.ref(""),b=e=>{V.value=e,x()},N=e=>{m.value=e,x()},w=async()=>{y.value=f.value,await x()},_=()=>{f.value="",y.value="",x()},x=async()=>{const t=await e(V.value,m.value,v.params.id,y.value);0===t.code&&(t.data.list.forEach((e=>{e.created_time=e.created_time?a(e.created_time,"yyyy-MM-dd hh:mm:ss"):"",e.updated_time=e.updated_time?a(e.updated_time,"yyyy-MM-dd hh:mm:ss"):"",e.scheduled_time=e.scheduled_time?a(e.scheduled_time,"yyyy-MM-dd hh:mm:ss"):""})),h.value=[],setTimeout((()=>{h.value=t.data.list,h.value}),100),p.value=t.data.total,V.value=t.data.page,m.value=t.data.pageSize)};Vue.onMounted((async()=>{x()}));const C=e=>{switch(e){case"Init":return"初始化";case"Pending":return"等待";case"Success":return"已成功";case"Failed":return"失败";case"Running":return"运行中";case"Pause":return"已暂停";case"Disabled":return"不可用";default:return""}},k=e=>{switch(e){case"Init":case"Running":return"info";case"Pending":return"warning";case"Success":return"success";case"Failed":case"Pause":case"Disabled":return"danger";default:return""}};return(e,a)=>{const c=Vue.resolveComponent("el-input"),V=Vue.resolveComponent("el-button"),v=Vue.resolveComponent("el-table-column"),y=Vue.resolveComponent("el-table"),E=Vue.resolveComponent("el-pagination");return Vue.openBlock(),Vue.createElementBlock("div",l,[Vue.createVNode(t,{title:"任务筛号列表"}),Vue.createElementVNode("div",r,[u,Vue.createElementVNode("div",n,[Vue.createElementVNode("div",s,[Vue.createVNode(c,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=e=>f.value=e),placeholder:"请输入手机号码",clearable:"",style:{width:"200px"},onClear:_,onKeyup:Vue.withKeys(e.searchTask,["enter","native"])},null,8,["modelValue","onKeyup"]),Vue.createVNode(V,{type:"primary",icon:"Search",onClick:w},{default:Vue.withCtx((()=>[Vue.createTextVNode("搜索")])),_:1}),Vue.createVNode(V,{color:"#626aef",icon:"refresh",dark:e.isDark,plain:"",onClick:x},{default:Vue.withCtx((()=>[Vue.createTextVNode("刷新")])),_:1},8,["dark"])])]),Vue.createElementVNode("div",i,[d,Vue.createElementVNode("span",o,Vue.toDisplayString(g.value),1)]),Vue.createVNode(y,{data:h.value,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"authorityId",style:{width:"100%"}},{default:Vue.withCtx((()=>[Vue.createVNode(v,{label:"ID","min-width":"180",prop:"ID"}),Vue.createVNode(v,{label:"任务ID","min-width":"180",prop:"main_task_id"}),Vue.createVNode(v,{align:"left",label:"手机号码","min-width":"180",prop:"phone"}),Vue.createVNode(v,{align:"left",label:"任务状态","min-width":"180"},{default:Vue.withCtx((({row:e})=>[Vue.createVNode(V,{type:k(e.status),size:"small","loading-icon":"Eleme",loading:"Running"==e.status,plain:""},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(C(e.status)),1)])),_:2},1032,["type","loading"])])),_:1}),Vue.createVNode(v,{align:"left",label:"任务信息","min-width":"180",prop:"task_info"}),Vue.createVNode(v,{align:"left",label:"调度时间","min-width":"180",prop:"scheduled_time"}),Vue.createVNode(v,{align:"left",label:"创建时间","min-width":"180",prop:"created_time"}),Vue.createVNode(v,{align:"left",label:"更新时间","min-width":"180",prop:"updated_time"})])),_:1},8,["data"]),Vue.createVNode(E,{"current-page":e.page,"page-size":m.value,"page-sizes":[10,30,50,100],total:p.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:b,onSizeChange:N},null,8,["current-page","page-size","total"])])])}}});export{c as default};
