/*! 
 Build based on gin-vue-admin 
 Time : 1705391497000 */
import{u as e,c as a}from"./index-e8818864.js";import{_ as t}from"./_plugin-vue_export-helper-1b428a4d.js";import"./.pnpm-8206d43d.js";import"vue";const o={class:"login-container"},l={class:"login-box"},r=(e=>(Vue.pushScopeId("data-v-4d46f169"),e=e(),Vue.popScopeId(),e))((()=>Vue.createElementVNode("h1",{class:"login-title"},"号仙筛号系统",-1))),c={class:"captcha-container"},u=["src"],n=t(Object.assign({name:"Login"},{__name:"index",setup(t){VueRouter.useRouter();const n=()=>{a({}).then((async e=>{i.captcha.push({max:e.data.captchaLength,min:e.data.captchaLength,message:"请输入".concat(e.data.captchaLength,"位验证码"),trigger:"blur"}),p.value=e.data.picPath,d.captchaId=e.data.captchaId,d.openCaptcha=e.data.openCaptcha}))};n();const s=Vue.ref(null),p=Vue.ref(""),d=Vue.reactive({username:"karot",password:"qwerty",captcha:"",captchaId:"",openCaptcha:!1}),i=Vue.reactive({username:[{validator:(e,a,t)=>{if(a.length<5)return t(new Error("请输入正确的用户名"));t()},trigger:"blur"}],password:[{validator:(e,a,t)=>{if(a.length<6)return t(new Error("请输入正确的密码"));t()},trigger:"blur"}],captcha:[{message:"验证码格式不正确",trigger:"blur"}]}),V=e(),m=()=>{s.value.validate((async e=>{if(!e)return ElementPlus.ElMessage({type:"error",message:"请正确填写登录信息",showClose:!0}),n(),!1;await(async()=>await V.LoginIn(d))()||n()}))};return(e,a)=>{const t=Vue.resolveComponent("el-input"),V=Vue.resolveComponent("el-form-item"),h=Vue.resolveComponent("el-button"),g=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createElementBlock("div",o,[Vue.createElementVNode("div",l,[r,Vue.createVNode(g,{ref_key:"loginForm",ref:s,model:d,rules:i,class:"login-form"},{default:Vue.withCtx((()=>[Vue.createVNode(V,{prop:"username"},{default:Vue.withCtx((()=>[Vue.createVNode(t,{modelValue:d.username,"onUpdate:modelValue":a[0]||(a[0]=e=>d.username=e),placeholder:"用户名","prefix-icon":"el-icon-user"},null,8,["modelValue"])])),_:1}),Vue.createVNode(V,{prop:"password"},{default:Vue.withCtx((()=>[Vue.createVNode(t,{modelValue:d.password,"onUpdate:modelValue":a[1]||(a[1]=e=>d.password=e),placeholder:"密码","show-password":"","prefix-icon":"el-icon-lock"},null,8,["modelValue"])])),_:1}),d.openCaptcha?(Vue.openBlock(),Vue.createBlock(V,{key:0,prop:"captcha"},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",c,[Vue.createVNode(t,{modelValue:d.captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>d.captcha=e),placeholder:"验证码",class:"captcha-input","prefix-icon":"el-icon-message"},null,8,["modelValue"]),p.value?(Vue.openBlock(),Vue.createElementBlock("img",{key:0,class:"captcha-image",src:p.value,alt:"验证码",onClick:a[3]||(a[3]=e=>n())},null,8,u)):Vue.createCommentVNode("",!0)])])),_:1})):Vue.createCommentVNode("",!0),Vue.createVNode(V,null,{default:Vue.withCtx((()=>[Vue.createVNode(h,{type:"primary",class:"login-btn",onClick:m},{default:Vue.withCtx((()=>[Vue.createTextVNode("登录")])),_:1})])),_:1})])),_:1},8,["model","rules"])])])}}}),[["__scopeId","data-v-4d46f169"]]);export{n as default};
