/*! 
 Build based on gin-vue-admin 
 Time : 1705391497000 */
import{f as e,h as t,r as a}from"./autoCode-c4ad6525.js";import{f as l}from"./format-7fc9107b.js";import"./index-e8818864.js";import"./.pnpm-8206d43d.js";import"vue";import"./date-8358c12f.js";import"./dictionary-b8ecc85f.js";import"./sysDictionary-30d98c9c.js";const o={class:"gva-table-box"},n={class:"gva-btn-list"},u={class:"gva-pagination"},i=Object.assign({name:"AutoCodeAdmin"},{__name:"index",setup(i){const r=VueRouter.useRouter(),c=Vue.ref(1),s=Vue.ref(0),d=Vue.ref(10),V=Vue.ref([]),p=e=>{d.value=e,f()},m=e=>{c.value=e,f()},f=async()=>{const t=await e({page:c.value,pageSize:d.value});0===t.code&&(V.value=t.data.list,s.value=t.data.total,c.value=t.data.page,d.value=t.data.pageSize)};f();const g=async(e,t)=>{t?ElementPlus.ElMessageBox.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{ElementPlus.ElMessageBox.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{ElementPlus.ElMessageBox.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await a({id:Number(e.ID),deleteTable:t})).code&&(ElementPlus.ElMessage.success("回滚成功"),f())}))}))})):ElementPlus.ElMessageBox.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await a({id:Number(e.ID),deleteTable:t})).code&&(ElementPlus.ElMessage.success("回滚成功"),f())}))},x=e=>{e?r.push({name:"autoCodeEdit",params:{id:e.ID}}):r.push({name:"autoCode"})};return(e,a)=>{const i=Vue.resolveComponent("el-button"),r=Vue.resolveComponent("el-table-column"),w=Vue.resolveComponent("el-tag"),C=Vue.resolveComponent("el-table"),N=Vue.resolveComponent("el-pagination");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",o,[Vue.createElementVNode("div",n,[Vue.createVNode(i,{type:"primary",icon:"plus",onClick:a[0]||(a[0]=e=>x(null))},{default:Vue.withCtx((()=>[Vue.createTextVNode("新增")])),_:1})]),Vue.createVNode(C,{data:V.value},{default:Vue.withCtx((()=>[Vue.createVNode(r,{type:"selection",width:"55"}),Vue.createVNode(r,{align:"left",label:"id",width:"60",prop:"ID"}),Vue.createVNode(r,{align:"left",label:"日期",width:"180"},{default:Vue.withCtx((e=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(l)(e.row.CreatedAt)),1)])),_:1}),Vue.createVNode(r,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),Vue.createVNode(r,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),Vue.createVNode(r,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),Vue.createVNode(r,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:Vue.withCtx((e=>[e.row.flag?(Vue.openBlock(),Vue.createBlock(w,{key:0,type:"danger",effect:"dark"},{default:Vue.withCtx((()=>[Vue.createTextVNode(" 已回滚 ")])),_:1})):(Vue.openBlock(),Vue.createBlock(w,{key:1,type:"success",effect:"dark"},{default:Vue.withCtx((()=>[Vue.createTextVNode(" 未回滚 ")])),_:1}))])),_:1}),Vue.createVNode(r,{align:"left",label:"操作","min-width":"240"},{default:Vue.withCtx((e=>[Vue.createElementVNode("div",null,[Vue.createVNode(i,{type:"primary",link:"",disabled:1===e.row.flag,onClick:t=>g(e.row,!0)},{default:Vue.withCtx((()=>[Vue.createTextVNode("回滚(删表)")])),_:2},1032,["disabled","onClick"]),Vue.createVNode(i,{type:"primary",link:"",disabled:1===e.row.flag,onClick:t=>g(e.row,!1)},{default:Vue.withCtx((()=>[Vue.createTextVNode("回滚(不删表)")])),_:2},1032,["disabled","onClick"]),Vue.createVNode(i,{type:"primary",link:"",onClick:t=>x(e.row)},{default:Vue.withCtx((()=>[Vue.createTextVNode("复用")])),_:2},1032,["onClick"]),Vue.createVNode(i,{type:"primary",link:"",onClick:a=>(async e=>{ElementPlus.ElMessageBox.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await t({id:Number(e.ID)})).code&&(ElementPlus.ElMessage.success("删除成功"),f())}))})(e.row)},{default:Vue.withCtx((()=>[Vue.createTextVNode("删除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),Vue.createElementVNode("div",u,[Vue.createVNode(N,{"current-page":c.value,"page-size":d.value,"page-sizes":[10,30,50,100],total:s.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:m,onSizeChange:p},null,8,["current-page","page-size","total"])])])])}}});export{i as default};
